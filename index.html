<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Economy Chart Tool</title>
    <link rel="icon" type="image/svg+xml" href="public/favicon.svg">
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <header>
        <h1>Economy Chart Tool</h1>
    </header>

    <div class="tabs">
        <button class="tab-button active" data-tab="market-view">Market View</button>
        <button class="tab-button" data-tab="book-viewer">Book Viewer</button>
        <button class="tab-button" data-tab="supply-demand">Supply & Demand</button>
    </div>

    <div class="tab-content">
        <!-- Market View Tab -->
        <div id="market-view" class="tab-pane active">
            <div class="controls">
                <div class="control-group">
                    <button id="loadDefaultBtn">Load Default Data</button>
                    <input type="file" id="csvFileInput" accept=".csv">
                    <label for="csvFileInput" class="file-input-label">Load CSV File</label>
                </div>
                <div class="control-group">
                    <label for="themeSelect">Select Theme:</label>
                    <select id="themeSelect">
                        <option value="classic">Classic</option>
                        <option value="modern">Modern</option>
                    </select>
                </div>
            </div>

            <div class="chart-section">
                <h2>Candle Stick Viewer</h2>
                <div id="loader" class="loader hidden">
                    <div class="spinner"></div>
                    <p>Loading data...</p>
                </div>
                <div id="chartContainer"></div>
            </div>
        </div>

        <!-- Book Viewer Tab -->
        <div id="book-viewer" class="tab-pane">
            <div class="controls">
                <div class="control-group">
                    <button id="loadDefaultBookBtn">Load Default Book Data</button>
                    <input type="file" id="bookCsvFileInput" accept=".csv">
                    <label for="bookCsvFileInput" class="file-input-label">Load Book CSV File</label>
                </div>
            </div>

            <div class="book-section">
                <h2>Order Book Viewer</h2>
                <div id="bookLoader" class="loader hidden">
                    <div class="spinner"></div>
                    <p>Loading order book data...</p>
                </div>
                
                <div class="order-book-summary">
                    <div class="summary-item">
                        <h3>Order Book Distribution</h3>
                        <div class="summary-values">
                            <div class="summary-value bids">
                                <span>Bids:</span>
                                <span id="totalBids">0</span>
                            </div>
                            <div class="summary-value asks">
                                <span>Asks:</span>
                                <span id="totalAsks">0</span>
                            </div>
                        </div>
                        <div class="summary-bar">
                            <div class="bar-fill bids-fill" data-tooltip="Bids: 0%"></div>
                            <div class="bar-fill asks-fill" data-tooltip="Asks: 0%"></div>
                        </div>
                    </div>
                </div>

                <div class="order-book-container">
                    <div class="order-book-column asks">
                        <h3>Asks (Sell Orders)</h3>
                        <table id="asksTable">
                            <thead>
                                <tr>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <div class="order-book-column bids">
                        <h3>Bids (Buy Orders)</h3>
                        <table id="bidsTable">
                            <thead>
                                <tr>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Supply & Demand Tab -->
        <div id="supply-demand" class="tab-pane">
            <div class="controls">
                <div class="control-group">
                    <button id="loadDefaultSupplyDemandBtn">Load Default Data</button>
                    <input type="file" id="supplyDemandCsvFileInput" accept=".csv">
                    <label for="supplyDemandCsvFileInput" class="file-input-label">Load CSV File</label>
                </div>
            </div>

            <div class="supply-demand-section">
                <h2>Supply & Demand Analysis</h2>
                <div id="supplyDemandLoader" class="loader hidden">
                    <div class="spinner"></div>
                    <p>Loading supply and demand data...</p>
                </div>
                <div id="supplyDemandContainer"></div>
                <div class="equilibrium-info">
                    <h3>Equilibrium Point</h3>
                    <div class="equilibrium-details">
                        <div class="detail-item">
                            <span>Price:</span>
                            <span id="equilibriumPrice">-</span>
                        </div>
                        <div class="detail-item">
                            <span>Quantity:</span>
                            <span id="equilibriumQuantity">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="dist/main.js"></script>
</body>
</html>